<!doctype html>
<html>
<head>
	<title>2D WebGL Lighting Engine Example 1</title>
	<link rel="stylesheet" type="text/css" href="css/main.css"/>
	<script type="text/javascript" src="../js/gl-matrix-min.js"></script>
	<script type="text/javascript" src="../js/Vector.js"></script>
	<script type="text/javascript" src="../js/LightingEngine.js"></script>
	<script type="text/javascript" src="js/example1.js"></script>

</head>
	<body onload="init();">
		<canvas id="canvas" width="1280" height="720"></canvas>
		<p>Use the mouse scroll wheel to change light colour (Only in chrome atm)<p>
		<p>Use the "A" and "D" keys to adjust the light intensity<p>
	</body>
	<!-- Light Shaders -->
	<script id="shader-fs" type="x-shader/x-fragment">
		precision mediump float;
		uniform vec2 lightLocation;
		uniform vec3 lightColor;
		uniform float screenHeight;

		void main() {
			float distance = length(lightLocation - gl_FragCoord.xy);
			float attenuation = 1.0 / distance;
			vec4 color = vec4(attenuation, attenuation, attenuation, pow(attenuation, 3.0)) * vec4(lightColor, 1);

			gl_FragColor = color;
		}
	</script>
	<script id="shader-vs" type="x-shader/x-vertex">
		attribute vec3 aVertexPosition;
		attribute vec4 aVertexColor;

		uniform mat4 uMVMatrix;
		uniform mat4 uPMatrix;

		varying vec4 vColor;

		void main(void) {
			gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);
			vColor = aVertexColor;
		}
	</script>
	<!-- Colour -->
	<script id="shader-colour-fs" type="x-shader/x-fragment">
		precision mediump float;

		varying vec4 vColor;

		void main(void) {
			gl_FragColor = vColor;
		}
	</script>

	<!-- Texture Shaders -->
	<script id="shader-texture-fs" type="x-shader/x-fragment">
		precision mediump float;

  		varying vec2 vTextureCoord;

  		uniform sampler2D uSampler;

	  void main(void) {
    	gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));
	  }
	</script>
	<script id="shader-texture-vs" type="x-shader/x-vertex">
		attribute vec3 aVertexPosition;
	  	attribute vec2 aTextureCoord;

		uniform mat4 uMVMatrix;
		uniform mat4 uPMatrix;
		varying vec2 vTextureCoord;

	  void main(void) {
	    gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);
    	vTextureCoord = aTextureCoord;
	  }
	</script>
</html>

